# do not install anything extra onto the image
language: generic

# use a Mac OSX image
os: osx

# only run builds on pushes to the master branch
branches:
  only:
  - master

# send email notifications when the build changes from succeeding to broken
notifications:
  email:
    on_success: never
    on_failure: change

# decrypt the encrypted SSH key file so it can be used for scp auth in post_build.sh
before_install:
- openssl aes-256-cbc -k "$KEYFILE_PASS" -in "${UPLOAD_KEYPATH}.enc" -out "${UPLOAD_KEYPATH}" -d

# run the script to download and install Unity editor
install:
- sudo -E sh ./Scripts/install.sh

# run the script for unit tests and builds
script:
- sudo -E sh ./Scripts/build.sh

# run the script to upload the builds as tarballs
after_success:
- sudo -E sh ./Scripts/post_build.sh

# environment variables used in bash scripts
env:
  global:
  - UNITYCI_PROJECT_NAME="ZÃ¼rich3D"
  - UPLOAD_KEYPATH="./Scripts/upload"
  - secure: AAAAB3NzaC1yc2EAAAADAQABAAACAQDFWbGc22fKcLPwjtvqSrLudo0EZtjPiwCGkQxXMD7OxumXZ7M2d2A6xtzdelfdDq7o6Q/+q/RMT3OOQ1FcF+7u5sTv7/b9FNNCCom7tiueQxmhfRt5aB8hkGHv2zd9I9JurMJCW/6WXUIGv2CNfvZf89mXIDCTcAxxsLNxF4m1XpzrLFJyj3FKtGrHLZwXOidFX6TaBmhmjzrEFaBXa9S1mXfSpSzzZoU3dtkG/J0dtYB0UAdDGxJDko/KiiuCXrMsDhDUIdF9MUq6qNQ3PHOJ8Npp8jWRDi/R4DtdLXHrmJZh+Q2KyRxARQ9ccqbHdr+k/ubFpIIA/WNhcr1hKogr2mEkvPYEiKAMpQro+wuQIspK+80PJIqeJRfyA7zl8+bBCEA6PvJb/NPszwYHHIFQYWGvCSOr5mrssT2Xmhs1W1gPOg82SszP2gVU36Kvqn97ct8xtG3IYH9O/iNEwa8vFcB3byNSEP0gX/80hgovMIsWblcHaKQujNzkr5SzXtx3hA8Elfn5Q/D7SeMd/RgFCMgTBB57/Ogi0J3CmbZYhqdbhzzVgn+W/m/01o2C2x9hFXxuig/pNo2g4ws4Z8r8Jzmr+hV8ZdjziTDOtKb+hu14BFAgkCic+p08NpAgWhN9h6w4m+f5SYtV0E10f19p5exL/bqIDg+8cNp7oJ9sxQ
